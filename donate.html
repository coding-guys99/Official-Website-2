<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title data-i18n="donate.meta.title">Support KeySearch — Donate</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="Support KeySearch development. Choose your currency and amount, pay with PayPal or Stripe. Thank you for helping us stay fast and focused."/>
  <script src="js/meta.js" data-page="donate"></script>
  <script src="js/seo.js" data-page="donate"></script>
  <!-- 全局樣式（沿用專案） -->
  <link rel="stylesheet" href="css/styles.css"/>
  <link rel="stylesheet" href="css/app.css"/>
  <link rel="stylesheet" href="css/responsive.css"/>
  <style>
    /* ===== Donate page (black-gold single column) ===== */
    :root{
      /* 若專案已有設計變數就會覆蓋這些；以下僅作保底 */
      --ks-bg: var(--bg, #0f1115);
      --ks-card: var(--card, #171a21);
      --ks-text: var(--text, #e7ecf3);
      --ks-muted: var(--muted, #99a2b2);
      --ks-border: var(--border, #262b36);
      --ks-accent: var(--accent, #6ee7ff);
      --ks-accent2: var(--accent-2, #86efac);
      --ks-radius: var(--radius, 12px);
      --gold: #d3b36b;
    }
    body{ background: var(--ks-bg); color: var(--ks-text); }

    /* Mini header（無全站選單時的返回入口） */
    .mini-header{
      position: sticky; top: 0; z-index: 10;
      display: flex; align-items: center; justify-content: space-between;
      padding: 14px 16px; border-bottom: 1px solid var(--ks-border);
      background: linear-gradient(180deg, rgba(211,179,107,0.06), rgba(0,0,0,0)) ;
      backdrop-filter: saturate(120%) blur(6px);
    }
    .mini-header .brand{
      display:flex; align-items:center; gap:10px; color:var(--ks-text); text-decoration:none;
      font-weight:600;
    }
    .mini-header .back{
      color:var(--ks-muted); text-decoration:none; font-size:.95rem;
      border:1px solid var(--ks-border); padding:6px 10px; border-radius:999px;
    }
    .mini-header .back:hover{ border-color:var(--gold); color:var(--gold); }

    /* Hero */
    .donate-hero{
      padding: 56px 0 24px;
      background:
        radial-gradient(1200px 500px at 50% -80px, rgba(211,179,107,.12), rgba(0,0,0,0)),
        linear-gradient(180deg, rgba(211,179,107,.05), rgba(0,0,0,0));
      text-align:center;
    }
    .donate-hero .container{ max-width: 900px; margin: 0 auto; padding: 0 16px; }
    .donate-hero h1{ margin: 0 0 10px; letter-spacing:.2px; }
    .donate-hero p{ margin: 0; color: var(--ks-muted); }

    /* Center card */
    .donate-wrap{ padding: 20px 16px 8px; }
    .donate-card{
      max-width: 720px; margin: 0 auto;
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)) , var(--ks-card);
      border: 1px solid var(--ks-border); border-radius: calc(var(--ks-radius) + 4px);
      box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03);
      padding: 24px;
    }
    .donate-card h2{ margin: 0 0 6px; }
    .donate-card .fine-print{ color: var(--ks-muted); font-size: .95rem; }

    /* Controls */
    .donate-controls{ display:flex; gap:12px; flex-wrap:wrap; align-items:center; margin: 14px 0 10px; }
    .donate-controls label span{ color: var(--ks-muted); margin-right: 6px; }

    .chips{ display:flex; flex-wrap:wrap; gap:8px; }
    .chip{
      border:1px solid var(--ks-border); background:transparent; color:var(--ks-text);
      padding:10px 14px; border-radius:999px; cursor:pointer; font-weight:600;
      transition: border-color .2s, box-shadow .2s, transform .02s;
    }
    .chip:hover{ border-color: var(--gold); box-shadow: 0 0 0 3px rgba(211,179,107,.12) inset; }
    .chip.active{ border-color: var(--gold); box-shadow: 0 0 0 2px rgba(211,179,107,.24) inset; }
    .donate-custom{ width: 140px; background: transparent; border:1px solid var(--ks-border); color: var(--ks-text);
      border-radius: 10px; padding: 10px 12px; }

    /* Buttons */
    .donate-actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 12px; }
    .btn-primary{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 16px; border-radius: 10px; text-decoration:none; font-weight:700;
      border:1px solid transparent;
    }
    .btn-paypal{ background:#0070ba; color:#fff; }
    .btn-paypal:hover{ filter:brightness(1.08); }
    .btn-stripe{ background:#635bff; color:#fff; }
    .btn-stripe:hover{ filter:brightness(1.08); }
    .btn-ghost{ border-color: var(--ks-border); color: var(--ks-text); }
    .btn-ghost:hover{ border-color: var(--gold); color: var(--gold); }

    /* Divider & List */
    .divider{ height:1px; background: var(--ks-border); margin: 18px 0; }
    .list{ margin:0; padding-left: 18px; }

    /* FAQ */
    .faq{ max-width: 820px; margin: 24px auto 56px; padding: 0 16px; }
    .faq h3{ margin: 0 0 8px; }
    .faq details{ border:1px solid var(--ks-border); border-radius: 10px; padding: 10px 14px; margin: 10px 0; background: var(--ks-card); }
    .faq summary{ cursor: pointer; font-weight:600; }
    .faq .fine-print{ color: var(--ks-muted); margin-top: 8px; }

    @media (max-width: 560px){
      .donate-custom{ width: 110px; }
    }
    
    #donate-currency {
  appearance: none; /* 隱藏系統箭頭 */
  -webkit-appearance: none;
  -moz-appearance: none;
  background: transparent;
  border: 1px solid var(--ks-border);
  border-radius: 999px;
  padding: 8px 32px 8px 14px;
  font-weight: 600;
  color: var(--ks-text);
  cursor: pointer;
  position: relative;
}
#donate-currency:hover {
  border-color: var(--gold);
  box-shadow: 0 0 0 3px rgba(211,179,107,.12) inset;
}
#donate-currency:focus {
  outline: none;
  border-color: var(--gold);
}

#donate-currency {
  background-image: url("data:image/svg+xml;utf8,<svg fill='%23d3b36b' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><path d='M5.25 7.5L10 12.25L14.75 7.5H5.25Z'/></svg>");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 14px;
}

/* 桌機：讓下拉清單更清楚（白底黑字），加粗尺寸與聚焦框 */
#donate-currency {
  appearance: none; -webkit-appearance: none; -moz-appearance: none;
  background: transparent;
  border: 1px solid var(--ks-border);
  border-radius: 999px;
  padding: 8px 32px 8px 14px;
  font-weight: 600; font-size: 15px; line-height: 1.2;
  color: var(--ks-text); cursor: pointer;
  background-image: url("data:image/svg+xml;utf8,<svg fill='%23d3b36b' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><path d='M5.25 7.5L10 12.25L14.75 7.5H5.25Z'/></svg>");
  background-repeat: no-repeat; background-position: right 12px center; background-size: 14px;
}
#donate-currency:hover { border-color: var(--gold); box-shadow: 0 0 0 3px rgba(211,179,107,.12) inset; }
#donate-currency:focus { outline: none; border-color: var(--gold); box-shadow: 0 0 0 3px rgba(211,179,107,.20) inset; }

/* 讓下拉面板內容在大多數瀏覽器呈現白底黑字，避免灰灰的 */
#donate-currency option { color: #0f1115; background: #fff; }

/* 防止被父層透明度或 pointer-events 影響（有時會灰掉/無法點） */
.donate-controls, #donate-currency { opacity: 1; pointer-events: auto; }

/* 提升層級避免被卡片陰影或容器裁切 */
#donate-currency { position: relative; z-index: 2; }
    
  </style>

<!-- Favicon / App icons (單圖示) -->
<link rel="icon" type="image/svg+xml" href="assets/brand/logo-icon-gold.svg">
<link rel="alternate icon" href="assets/brand/logo-icon-32.png" sizes="32x32">
<link rel="apple-touch-icon" href="assets/brand/logo-icon-180.png" sizes="180x180">
<link rel="mask-icon" href="assets/brand/logo-icon-black.svg" color="#d4af37">

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1HCSLC2TN3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1HCSLC2TN3');
</script>
  
</head>
<body>

  <!-- Mini header -->
<header class="mini-header" role="banner">
  <a class="brand" href="index.html" aria-label="KeySearch home">
    <img class="brand-icon" src="assets/brand/logo-icon-gold.svg" alt="KeySearch logo" width="28" height="28">
    <span class="brand-text">KeySearch</span>
  </a>

  <!-- ✅ aria-label 也一起本地化 -->
  <a class="back"
     href="support.html"
     data-i18n="donate.back._"
     data-i18n-attr="aria-label">← Back</a>
</header>

<!-- Hero -->
<section class="donate-hero">
  <div class="container">
    <h1 data-i18n="donate.title">Support development</h1>
    <p data-i18n="donate.subtitle">KeySearch is free. If it saves you time, consider supporting the project.</p>
  </div>
</section>

<!-- Card -->
<main class="donate-wrap">
  <section class="donate-card" role="region" aria-labelledby="donateHeading">
    <h2 id="donateHeading" data-i18n="donate.card.title">Donate</h2>
    <p class="fine-print" data-i18n="donate.card.desc">Choose your currency and amount. Then pick PayPal or Stripe to complete payment.</p>

    <div class="donate-controls">
      <label>
        <span data-i18n="donate.currency">Currency</span>
        <!-- ✅ aria-label 本地化 -->
        <select id="donate-currency"
                aria-label="Choose currency"
                data-i18n="donate.currency"
                data-i18n-attr="aria-label">
          <option value="USD" selected>USD $</option>
          <option value="EUR">EUR €</option>
          <option value="GBP">GBP £</option>
          <option value="TWD">TWD NT$</option>
          <option value="MYR">MYR RM</option>
          <option value="HKD">HKD HK$</option>
          <option value="JPY">JPY ¥</option>
          <option value="SGD">SGD S$</option>
          <option value="CAD">CAD C$</option>
          <option value="AUD">AUD A$</option>
        </select>
      </label>

      <div class="chips" id="chips">
        <button class="chip" data-base-usd="5">$5</button>
        <button class="chip" data-base-usd="10">$10</button>
        <button class="chip" data-base-usd="20">$20</button>
        <button class="chip" data-base-usd="50">$50</button>

        <!-- ✅ placeholder + aria-label 本地化 -->
        <input id="donate-custom" class="donate-custom" type="number" min="1" step="1"
               placeholder="Custom" aria-label="Custom amount"
               data-i18n="donate.chips.custom"
               data-i18n-attr="placeholder,aria-label">
      </div>
    </div>

    <div class="donate-actions">
      <a id="btn-paypal" class="btn-primary btn-paypal"
         href="https://paypal.me/AndyWongChernInn" target="_blank" rel="noopener"
         data-i18n="donate.paypal">Pay with PayPal</a>

      <a id="btn-stripe" class="btn-primary btn-stripe"
         href="https://buy.stripe.com/your_usd_fallback" target="_blank" rel="noopener"
         data-i18n="donate.stripe">Pay with Stripe</a>

      <a id="btn-coffee" class="btn-ghost btn-primary"
         href="https://www.buymeacoffee.com/yourid" target="_blank" rel="noopener"
         data-i18n="donate.coffee">Buy me a coffee</a>
    </div>

    <div class="divider"></div>

    <ul class="list">
      <li data-i18n="donate.uses.1">Funds cover hosting, storage, testing devices, and development time.</li>
      <li data-i18n="donate.uses.2">Roadmap priorities: performance, multi-language, desktop packaging, and licensing.</li>
    </ul>

    <p class="fine-print" data-i18n="donate.thanks">Thanks for your support — it keeps KeySearch fast and focused.</p>
  </section>

  <section class="faq" aria-label="Donate FAQ">
    <h3 data-i18n="donate.faq.title">FAQ</h3>

    <details>
      <summary data-i18n="donate.faq.q1">Can I get a receipt?</summary>
      <div class="fine-print" data-i18n="donate.faq.a1">Yes. PayPal/Stripe emails a receipt automatically after payment.</div>
    </details>
    <details>
      <summary data-i18n="donate.faq.q2">Which currency will I be charged in?</summary>
      <div class="fine-print" data-i18n="donate.faq.a2">PayPal uses your account currency; Stripe uses the currency shown on the checkout page.</div>
    </details>
    <details>
      <summary data-i18n="donate.faq.q3">Refunds?</summary>
      <div class="fine-print" data-i18n="donate.faq.a3">Donations are voluntary and typically non-refundable. If there’s an issue, contact us.</div>
    </details>
    <details>
      <summary data-i18n="donate.faq.q4">Is there a subscription?</summary>
      <div class="fine-print" data-i18n="donate.faq.a4">For now donations are one-time. Subscriptions may be added later.</div>
    </details>
  </section>
</main>
  <script>
(function(){
  // ====== PayPal.me ======
  const PAYPAL_ME_BASE = 'https://paypal.me/AndyWongChernInn';

  // ====== Stripe Payment Links（沿用你貼的 7 幣別 mapping）======
  const STRIPE_LINKS = {
    USD: { fallback:'https://buy.stripe.com/usd_fallback_link', byAmount:{
      5:'https://donate.stripe.com/4gM28lg8Y5YjekQ9i11Nu0E',
      10:'https://donate.stripe.com/7sY7sF4qg9av3Gc65P1Nu0F',
      20:'https://donate.stripe.com/cNidR32i83Qb0u065P1Nu0D',
      50:'https://donate.stripe.com/28E14h0a02M790w65P1Nu0C'}},
    EUR: { fallback:'https://buy.stripe.com/eur_fallback_link', byAmount:{
      5:'https://donate.stripe.com/cNieV71e42M7a4Adyh1Nu0B',
      10:'https://donate.stripe.com/6oUcMZ7Cs1I3b8E65P1Nu0A',
      20:'https://donate.stripe.com/3cIaER9KAaez0u08dX1Nu0z',
      50:'https://donate.stripe.com/28E4gt3mceuP7Ws8dX1Nu0y'}},
    GBP: { fallback:'https://buy.stripe.com/gbp_fallback_link', byAmount:{
      5:'https://donate.stripe.com/28E9ANe0QeuPgsYfGp1Nu0x',
      10:'https://donate.stripe.com/cNi4gte0Q4UfccI65P1Nu0w',
      20:'https://donate.stripe.com/7sY3cpf4U72n90w2TD1Nu0u',
      50:'https://donate.stripe.com/dRm14hbSI4Uf6So8dX1Nu0v'}},
    TWD: { fallback:'https://buy.stripe.com/twd_fallback_link', byAmount:{
      160:'https://donate.stripe.com/9B66oBe0Q72n0u0fGp1Nu0t',
      320:'https://donate.stripe.com/3cIdR32i81I35OkfGp1Nu0s',
      640:'https://donate.stripe.com/14A28l1e4biDccI1Pz1Nu0r',
      1600:'https://donate.stripe.com/5kQ8wJ1e42M7gsYfGp1Nu0q'}},
    MYR: { fallback:'https://buy.stripe.com/myr_fallback_link', byAmount:{
      24:'https://donate.stripe.com/6oU5kx9KA4Uf5Okbq91Nu0p',
      48:'https://donate.stripe.com/aFaaERe0Q1I35Ok9i11Nu0o',
      96:'https://donate.stripe.com/7sY4gt1e45YjccIcud1Nu0n',
      240:'https://donate.stripe.com/dRm3cp1e41I390w79T1Nu0m'}},
    HKD: { fallback:'https://buy.stripe.com/hkd_fallback_link', byAmount:{
      40:'https://donate.stripe.com/00wcMZf4U5YjgsY2TD1Nu0l',
      80:'https://donate.stripe.com/28E8wJ6yo5Yj1y465P1Nu0j',
      160:'https://donate.stripe.com/7sYdR35uk3QbgsYeCl1Nu0k',
      400:'https://donate.stripe.com/9B68wJe0Q5Yjb8E79T1Nu0i'}},
    JPY: { fallback:'https://buy.stripe.com/jpy_fallback_link', byAmount:{
      750:'https://donate.stripe.com/7sYfZbf4UdqL6Socud1Nu0h',
      1500:'https://donate.stripe.com/cNi4gtcWM5Yj2C82TD1Nu0g',
      3000:'https://donate.stripe.com/5kQ8wJ2i8cmH2C851L1Nu0f',
      7500:'https://donate.stripe.com/6oU6oB1e44Uf6So51L1Nu0e'}},
    SGD: {
  fallback: 'https://buy.stripe.com/sgd_fallback_link',
  byAmount: {
    7:  'https://donate.stripe.com/dRm00dbSI2M71y4dyh1Nu0d',
    15: 'https://donate.stripe.com/bJe4gt3mc86ra4Acud1Nu0c',
    30: 'https://donate.stripe.com/4gMeV7g8Y86rgsY51L1Nu0b',
    75: 'https://donate.stripe.com/6oU8wJ1e486r1y4dyh1Nu0a'
  }
},
CAD: {
  fallback: 'https://buy.stripe.com/cad_fallback_link',
  byAmount: {
    7:  'https://donate.stripe.com/cNi9ANcWM3Qbb8E3XH1Nu09',
    14: 'https://donate.stripe.com/fZu4gte0QfyTa4A65P1Nu07',
    28: 'https://donate.stripe.com/00weV76yo1I3b8E51L1Nu06',
    70: 'https://donate.stripe.com/6oUaER3mc5Yj6SofGp1Nu05'
  }
},
AUD: {
  fallback: 'https://buy.stripe.com/aud_fallback_link',
  byAmount: {
    8:  'https://donate.stripe.com/dRm5kxe0Q0DZa4Acud1Nu04',
    16: 'https://donate.stripe.com/fZudR35ukbiD3Gc9i11Nu03',
    32: 'https://donate.stripe.com/aFacMZ2i8aeza4A79T1Nu02',
    80: 'https://donate.stripe.com/28E6oB9KA3QbccIdyh1Nu01'
  }
}
  };

  // ====== 固定檔位（不追匯率）======
  const PRESET = {
  USD:[5,10,20,50],
  EUR:[5,10,20,50],
  GBP:[5,10,20,50],
  TWD:[160,320,640,1600],
  MYR:[24,48,96,240],
  HKD:[40,80,160,400],
  JPY:[750,1500,3000,7500],
  SGD:[7,15,30,75],
  CAD:[7,14,28,70],
  AUD:[8,16,32,80]
};
const CURRENCY_PREFIX = {
  USD:'$', EUR:'€', GBP:'£', TWD:'NT$', MYR:'RM',
  HKD:'HK$', JPY:'¥', SGD:'S$', CAD:'C$', AUD:'A$'
};
    
        // ====== DOM ======
  const selCcy = document.getElementById('donate-currency');
  const chips  = Array.from(document.querySelectorAll('.chip'));
  const input  = document.getElementById('donate-custom');
  const btnPP  = document.getElementById('btn-paypal');
  const btnSt  = document.getElementById('btn-stripe');

  // ====== 狀態 ======
  const current = { currency: selCcy.value, amount: 5 };

  // ====== 工具 ======
  function renderChips(ccy){
    const list = PRESET[ccy] || PRESET.USD;
    chips.forEach((ch, i)=>{
      const val = list[i] ?? list[0];
      ch.dataset.amt = String(val);
      ch.textContent  = (CURRENCY_PREFIX[ccy]||'$') + val;
    });
  }
  function setActiveChipByAmt(amt){
    chips.forEach(c=>c.classList.toggle('active', Number(c.dataset.amt)===Number(amt)));
  }
  function stripeLink(ccy, amt){
    const cfg = STRIPE_LINKS[ccy] || STRIPE_LINKS.USD;
    return cfg.byAmount[String(amt)] || cfg.fallback;
  }
  function updateLinks(){
    const ccy = selCcy.value;
    const amt = current.amount;
    btnPP.href = amt ? `${PAYPAL_ME_BASE}/${amt}` : PAYPAL_ME_BASE;
    btnSt.href = stripeLink(ccy, amt);
  }
  function withUtm(href, method, ccy, amt){
    try{
      const u = new URL(href);
      u.searchParams.set('utm_source','site');
      u.searchParams.set('utm_campaign','donate');
      u.searchParams.set('method', method);
      u.searchParams.set('ccy', ccy);
      u.searchParams.set('amt', amt);
      return u.toString();
    }catch{ return href; }
  }

  // ====== 初始化 ======
  renderChips(current.currency);
  setActiveChipByAmt(current.amount);
  updateLinks();

  // ====== 事件 ======
  selCcy.addEventListener('change', ()=>{
    current.currency = selCcy.value;
    renderChips(current.currency);
    // 預設選第一顆
    const first = chips[0];
    current.amount = Number(first.dataset.amt);
    setActiveChipByAmt(current.amount);
    input.value = '';
    updateLinks();
  });

  chips.forEach(ch=>{
    ch.addEventListener('click', ()=>{
      current.amount = Number(ch.dataset.amt);
      input.value = '';
      setActiveChipByAmt(current.amount);
      updateLinks();
    });
  });

  input.addEventListener('input', ()=>{
    const v = Math.max(1, Math.floor(Number(input.value)||0));
    current.amount = v;
    setActiveChipByAmt(null); // 自訂金額時取消 chip 高亮
    updateLinks();
  });

  // 付款按鈕加 UTM
  btnPP.addEventListener('click', ()=>{ btnPP.href = withUtm(btnPP.href,'paypal', current.currency, current.amount); });
  btnSt.addEventListener('click', ()=>{ btnSt.href = withUtm(btnSt.href,'stripe', current.currency, current.amount); });

  // URL 參數：?ccy=GBP&amt=10
  (function applyUrlParams(){
    const p = new URLSearchParams(location.search);
    const c = (p.get('ccy')||'').toUpperCase();
    const a = Number(p.get('amt')||'');
    const allowed = ['USD','EUR','GBP','TWD','MYR','HKD','JPY','SGD','CAD','AUD'];
    if (allowed.includes(c)){
      selCcy.value = c;
      current.currency = c;
      renderChips(c);
    }
    if (!Number.isNaN(a) && a>0){
      current.amount = a;
      input.value = '';
      setActiveChipByAmt(a);
    }else{
      // 沒帶 amt 就選第一顆
      const first = chips[0];
      current.amount = Number(first.dataset.amt);
      setActiveChipByAmt(current.amount);
    }
    updateLinks();
  })();
})();
</script>
  <script src="js/lang.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
